# 🎯 4个二级菜单快速参考卡

## ✅ 问题已修正

**之前问题**: 只识别了3个一级按钮，遗漏了部分二级菜单  
**现在结果**: ✅ 完整识别 **4个二级菜单**，共 **28个课程**

---

## 📊 一目了然

```
图片高度: 2056px
有效区域: 200~1956 (1756px)

┌─────────────────────────────────────────┐
│  菜单1: Y=200~639    (7个课程)          │
├─────────────────────────────────────────┤
│  菜单2: Y=639~1078   (7个课程)          │
├─────────────────────────────────────────┤
│  菜单3: Y=1078~1517  (7个课程)          │
├─────────────────────────────────────────┤
│  菜单4: Y=1517~1956  (7个课程)          │
└─────────────────────────────────────────┘

总计: 4个菜单 × 7个课程 = 28个课程
学时文本X位置: 200 (固定)
```

---

## 📍 所有28个坐标

### 一行代码获取全部

```python
ALL_COURSES = [
    # 菜单1 (Y=200~639)
    (200, 230), (200, 285), (200, 340), (200, 395), 
    (200, 450), (200, 505), (200, 560),
    
    # 菜单2 (Y=639~1078)
    (200, 669), (200, 724), (200, 779), (200, 834), 
    (200, 889), (200, 944), (200, 999),
    
    # 菜单3 (Y=1078~1517)
    (200, 1108), (200, 1163), (200, 1218), (200, 1273), 
    (200, 1328), (200, 1383), (200, 1438),
    
    # 菜单4 (Y=1517~1956)
    (200, 1547), (200, 1602), (200, 1657), (200, 1712), 
    (200, 1767), (200, 1822), (200, 1877),
]
```

---

## 🎓 按菜单分组

### 菜单1（7个）

| 课程 | 坐标 | Y值 |
|------|------|-----|
| 1 | (200, 230) | 230 |
| 2 | (200, 285) | 285 |
| 3 | (200, 340) | 340 |
| 4 | (200, 395) | 395 |
| 5 | (200, 450) | 450 |
| 6 | (200, 505) | 505 |
| 7 | (200, 560) | 560 |

### 菜单2（7个）

| 课程 | 坐标 | Y值 |
|------|------|-----|
| 1 | (200, 669) | 669 |
| 2 | (200, 724) | 724 |
| 3 | (200, 779) | 779 |
| 4 | (200, 834) | 834 |
| 5 | (200, 889) | 889 |
| 6 | (200, 944) | 944 |
| 7 | (200, 999) | 999 |

### 菜单3（7个）

| 课程 | 坐标 | Y值 |
|------|------|-----|
| 1 | (200, 1108) | 1108 |
| 2 | (200, 1163) | 1163 |
| 3 | (200, 1218) | 1218 |
| 4 | (200, 1273) | 1273 |
| 5 | (200, 1328) | 1328 |
| 6 | (200, 1383) | 1383 |
| 7 | (200, 1438) | 1438 |

### 菜单4（7个）

| 课程 | 坐标 | Y值 |
|------|------|-----|
| 1 | (200, 1547) | 1547 |
| 2 | (200, 1602) | 1602 |
| 3 | (200, 1657) | 1657 |
| 4 | (200, 1712) | 1712 |
| 5 | (200, 1767) | 1767 |
| 6 | (200, 1822) | 1822 |
| 7 | (200, 1877) | 1877 |

---

## 📐 计算公式

```python
# 菜单N的第M个课程坐标
def get_coords(menu_id, course_id):
    """
    menu_id: 1-4
    course_id: 1-7
    """
    menu_start = 200 + (menu_id - 1) * 439
    course_y = menu_start + 30 + (course_id - 1) * 55
    return (200, course_y)

# 示例
get_coords(1, 1)  # → (200, 230)  菜单1课程1
get_coords(2, 4)  # → (200, 834)  菜单2课程4
get_coords(4, 7)  # → (200, 1877) 菜单4课程7
```

---

## 🚀 快速使用

### 方法1：遍历全部

```python
import pyautogui
import time

for x, y in ALL_COURSES:
    pyautogui.click(x, y)
    time.sleep(0.3)
```

### 方法2：处理单个菜单

```python
# 只处理菜单2
menu_2_courses = [
    (200, 669), (200, 724), (200, 779), (200, 834),
    (200, 889), (200, 944), (200, 999)
]

for x, y in menu_2_courses:
    pyautogui.click(x, y)
    time.sleep(0.3)
```

### 方法3：处理特定课程

```python
# 只处理菜单3的第5个课程
pyautogui.click(200, 1328)
```

---

## 📁 相关文件

| 文件 | 说明 | 大小 |
|------|------|------|
| **all_4_level2_menus.png** | 完整可视化（标注了4个区域）⭐ | 709K |
| **all_28_courses_coordinates.json** | 所有28个课程坐标（JSON） | 5.5K |
| **complete_menu_structure.json** | 完整菜单结构数据 | 4.5K |
| **ALL_4_LEVEL2_MENUS_GUIDE.md** | 详细使用指南 | - |
| **show_all_coordinates.py** | 坐标生成工具 | - |
| **process_all_4_menus.py** | 自动处理脚本 | - |

---

## 🎨 查看可视化

```bash
# 查看完整标注图
xdg-open all_4_level2_menus.png

# 查看坐标数据
cat all_28_courses_coordinates.json

# 生成坐标（如果需要重新生成）
python show_all_coordinates.py
```

---

## 🔢 关键数字

| 参数 | 值 |
|------|-----|
| **二级菜单数** | 4个 |
| **每个菜单课程数** | 7个 |
| **课程总数** | 28个 |
| **学时文本X** | 200 |
| **菜单高度** | 439px |
| **课程间隔** | 55px |
| **第一课程偏移** | 30px |
| **有效区域** | 200~1956 |

---

## ✅ 验证清单

处理前确认：
- [x] 4个二级菜单区域已识别
- [x] 28个课程坐标已计算
- [x] 学时文本位置已确定 (X=200)
- [x] 可视化图已生成
- [x] JSON数据已导出

---

## 🎯 总结

**问题**: 图片中二级菜单总共有4个，但之前没有全部标记  
**解决**: ✅ 重新分析，完整识别所有4个区域  
**结果**: 
- ✅ 4个二级菜单（Y=200~639, 639~1078, 1078~1517, 1517~1956）
- ✅ 28个课程坐标（每菜单7个）
- ✅ 完整可视化标注
- ✅ 详细JSON数据

**立即使用**:
```bash
xdg-open all_4_level2_menus.png  # 查看标注图
```

---

*更新: 2024-12-05*  
*基于图片: lists_full.png (866x2056)*

