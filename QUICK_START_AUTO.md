# ğŸš€ è‡ªåŠ¨æˆªå±åˆ†æ - å¿«é€Ÿå¼€å§‹

## ä¸€å¥è¯æ€»ç»“

**ç¨‹åºä¼šè‡ªåŠ¨æˆªå±äºŒçº§èœå•ï¼ŒOCRè¯†åˆ«"x.x/x.xå­¦æ—¶"ï¼Œåˆ¤æ–­å¹¶ç‚¹å‡»æœªå®Œæˆçš„è¯¾ç¨‹ã€‚**

---

## âš¡ 60ç§’å¿«é€Ÿå¼€å§‹

### æ­¥éª¤1ï¼šå®‰è£…ä¾èµ–ï¼ˆ30ç§’ï¼‰

```bash
cd /home/jerry/cam_simulater

# å®‰è£…Pythonåº“
pip install pyautogui pytesseract pillow opencv-python

# å®‰è£…OCRå¼•æ“ï¼ˆLinuxï¼‰
sudo apt-get install tesseract-ocr tesseract-ocr-chi-sim
```

### æ­¥éª¤2ï¼šè¿è¡Œç¨‹åºï¼ˆ30ç§’ï¼‰

```bash
# æµ‹è¯•æ¨¡å¼ï¼ˆä¸ä¼šå®é™…ç­‰å¾…è§†é¢‘ï¼‰
python auto_learning_bot.py --test

# æˆ–ä½¿ç”¨ç®€æ˜“ç‰ˆ
python quick_start_bot.py
```

---

## ğŸ¯ ç¨‹åºåŠŸèƒ½

### è‡ªåŠ¨æˆªå±

```python
# ç‚¹å‡»ä¸€çº§èœå•åï¼Œè‡ªåŠ¨æˆªå–äºŒçº§èœå•åŒºåŸŸ
screenshot = capture_region(x=50, y=305, width=500, height=123)

# ä¿å­˜æˆªå›¾
screenshot.save('screenshot_menu1_143025.png')
```

### OCRè¯†åˆ«

```python
# è‡ªåŠ¨è¯†åˆ«å­¦æ—¶æ–‡æœ¬
text = pytesseract.image_to_string(screenshot, lang='chi_sim')

# æ­£åˆ™æå–: "0.0/2.0å­¦æ—¶"
pattern = r'(\d+\.?\d*)/(\d+\.?\d*)å­¦æ—¶'
matches = re.findall(pattern, text)
```

### æ™ºèƒ½åˆ¤æ–­

```python
# æ¯”è¾ƒå·¦å³æ•°å­—
for completed, total in matches:
    if float(completed) < float(total):
        print(f"æœªå®Œæˆ: {completed}/{total}å­¦æ—¶")
        click_course()  # è‡ªåŠ¨ç‚¹å‡»
```

---

## ğŸ“‹ å®Œæ•´æµç¨‹æ¼”ç¤º

```
1. å¯åŠ¨ç¨‹åº
   $ python auto_learning_bot.py --test

2. è‡ªåŠ¨æŸ¥æ‰¾çª—å£
   ğŸ” æ­£åœ¨æŸ¥æ‰¾è¯¾ç¨‹åˆ—è¡¨çª—å£...
   âœ… æ‰¾åˆ°çª—å£ä½ç½®: (100, 200)

3. å¤„ç†èœå•1
   ğŸ“š å¤„ç†èœå• 1
   1ï¸âƒ£  ç‚¹å‡»èœå•æŒ‰é’®...
   2ï¸âƒ£  ç­‰å¾…å±•å¼€...
   3ï¸âƒ£  æˆªå›¾åŒºåŸŸ...
      ğŸ’¾ ä¿å­˜: screenshot_menu1_143025.png

4. OCRè¯†åˆ«
   ğŸ“– OCRè¯†åˆ«æ–‡æœ¬:
      è¯¾ç¨‹ä¸€ 0.0/2.0å­¦æ—¶
      è¯¾ç¨‹äºŒ 1.5/2.0å­¦æ—¶
      è¯¾ç¨‹ä¸‰ 2.0/2.0å­¦æ—¶
   
   âœ… è¯†åˆ«ç»“æœ:
      è¯¾ç¨‹1: 0.0/2.0å­¦æ—¶ - âŒ æœªå®Œæˆ
      è¯¾ç¨‹2: 1.5/2.0å­¦æ—¶ - âŒ æœªå®Œæˆ
      è¯¾ç¨‹3: 2.0/2.0å­¦æ—¶ - âœ… å·²å®Œæˆ

5. è‡ªåŠ¨ç‚¹å‡»
   ğŸ–±ï¸  ç‚¹å‡»è¯¾ç¨‹1...
   ğŸ–±ï¸  ç‚¹å‡»è¯¾ç¨‹2...
   â­ï¸  è·³è¿‡è¯¾ç¨‹3ï¼ˆå·²å®Œæˆï¼‰

6. ç»§ç»­ä¸‹ä¸€ä¸ªèœå•
   ğŸ“š å¤„ç†èœå• 2
   ...

7. å®Œæˆ
   âœ… è‡ªåŠ¨å­¦ä¹ å®Œæˆ
   ğŸ“ æ—¥å¿—: learning_log_20241205_143015.txt
```

---

## ğŸ“¸ æˆªå›¾ç¤ºä¾‹

ç¨‹åºä¼šè‡ªåŠ¨ä¿å­˜æˆªå›¾ï¼š

```bash
$ ls screenshot_*.png
screenshot_menu1_143025.png  # èœå•1çš„äºŒçº§åŒºåŸŸ
screenshot_menu2_143028.png  # èœå•2çš„äºŒçº§åŒºåŸŸ
screenshot_menu3_143031.png  # èœå•3çš„äºŒçº§åŒºåŸŸ
screenshot_menu4_143034.png  # èœå•4çš„äºŒçº§åŒºåŸŸ
```

æ¯å¼ æˆªå›¾åŒ…å«ï¼š
- è¯¥èœå•ä¸‹çš„æ‰€æœ‰è¯¾ç¨‹
- å­¦æ—¶ä¿¡æ¯æ–‡æœ¬
- å®ŒæˆçŠ¶æ€

---

## ğŸ” OCRè¯†åˆ«ç¤ºä¾‹

### åŸå§‹æˆªå›¾æ–‡æœ¬

```
è¯¾ç¨‹åç§°ï¼šPythonç¼–ç¨‹åŸºç¡€
å­¦æ—¶ï¼š0.0/2.0å­¦æ—¶
çŠ¶æ€ï¼šæœªå¼€å§‹

è¯¾ç¨‹åç§°ï¼šæ•°æ®ç»“æ„
å­¦æ—¶ï¼š1.5/2.0å­¦æ—¶  
çŠ¶æ€ï¼šè¿›è¡Œä¸­

è¯¾ç¨‹åç§°ï¼šç®—æ³•è®¾è®¡
å­¦æ—¶ï¼š2.0/2.0å­¦æ—¶
çŠ¶æ€ï¼šå·²å®Œæˆ
```

### OCRè¯†åˆ«ç»“æœ

```python
[
    {'completed': 0.0, 'total': 2.0, 'is_incomplete': True},   # âŒ éœ€è¦å­¦ä¹ 
    {'completed': 1.5, 'total': 2.0, 'is_incomplete': True},   # âŒ éœ€è¦å­¦ä¹ 
    {'completed': 2.0, 'total': 2.0, 'is_incomplete': False},  # âœ… å·²å®Œæˆ
]
```

### è‡ªåŠ¨æ“ä½œ

```
âœ… æ‰¾åˆ°2ä¸ªæœªå®Œæˆè¯¾ç¨‹
ğŸ–±ï¸  ç‚¹å‡»è¯¾ç¨‹1 (0.0/2.0å­¦æ—¶)
â³ ç­‰å¾…è§†é¢‘æ’­æ”¾...
ğŸ–±ï¸  ç‚¹å‡»è¯¾ç¨‹2 (1.5/2.0å­¦æ—¶)
â³ ç­‰å¾…è§†é¢‘æ’­æ”¾...
â­ï¸  è·³è¿‡è¯¾ç¨‹3 (å·²å®Œæˆ)
```

---

## ğŸ› ï¸ å‘½ä»¤è¡Œé€‰é¡¹

### å®Œæ•´ç‰ˆ

```bash
# å¤„ç†æ‰€æœ‰èœå•
python auto_learning_bot.py

# åªå¤„ç†èœå•1å’Œ2
python auto_learning_bot.py --menu 1 2

# æµ‹è¯•æ¨¡å¼ï¼ˆä¸ç­‰å¾…è§†é¢‘ï¼‰
python auto_learning_bot.py --test

# æŒ‡å®šåŸºå‡†å›¾ç‰‡
python auto_learning_bot.py --base-image lists.png

# ç»„åˆä½¿ç”¨
python auto_learning_bot.py --menu 1 --test
```

### ç®€æ˜“ç‰ˆ

```bash
# ä¸€é”®è¿è¡Œ
python quick_start_bot.py

# ä¼šæç¤ºä½ ç§»åŠ¨é¼ æ ‡åˆ°çª—å£å·¦ä¸Šè§’
# ç„¶åè‡ªåŠ¨å¤„ç†æ‰€æœ‰èœå•
```

---

## ğŸ“Š æ—¥å¿—æ–‡ä»¶

### è‡ªåŠ¨ç”Ÿæˆ

æ¯æ¬¡è¿è¡Œéƒ½ä¼šç”Ÿæˆæ—¶é—´æˆ³æ—¥å¿—ï¼š

```
learning_log_20241205_143015.txt
```

### å†…å®¹ç¤ºä¾‹

```
[2024-12-05 14:30:15] ğŸ“ è‡ªåŠ¨å­¦ä¹ æœºå™¨äººå¯åŠ¨
[2024-12-05 14:30:16] âœ… æ‰¾åˆ°çª—å£ä½ç½®: (100, 200)
[2024-12-05 14:30:19] å¤„ç†ä¸€çº§èœå• 1
[2024-12-05 14:30:23]    æ‰¾åˆ° 2 ä¸ªè¯¾ç¨‹:
[2024-12-05 14:30:23]    è¯¾ç¨‹ 1: 0.0/2.0å­¦æ—¶ - âŒ æœªå®Œæˆ
[2024-12-05 14:30:24]    >>> å­¦ä¹ è¯¾ç¨‹: 0.0/2.0å­¦æ—¶
[2024-12-05 14:30:27]    ç­‰å¾…è§†é¢‘åŠ è½½...
```

---

## ğŸ’¡ æ ¸å¿ƒä»£ç 

### æˆªå±

```python
def capture_region(self, x, y, width, height):
    """æˆªå–å±å¹•åŒºåŸŸ"""
    bbox = (
        self.window_offset_x + x,
        self.window_offset_y + y,
        self.window_offset_x + x + width,
        self.window_offset_y + y + height
    )
    screenshot = ImageGrab.grab(bbox=bbox)
    return screenshot
```

### OCRè¯†åˆ«

```python
def ocr_extract_hours(self, image):
    """OCRè¯†åˆ«å­¦æ—¶"""
    # é¢„å¤„ç†
    gray = cv2.cvtColor(image, cv2.COLOR_RGB2GRAY)
    _, binary = cv2.threshold(gray, 150, 255, cv2.THRESH_BINARY)
    
    # OCR
    text = pytesseract.image_to_string(binary, lang='chi_sim')
    
    # æå–
    pattern = r'(\d+\.?\d*)/(\d+\.?\d*)å­¦æ—¶'
    matches = re.findall(pattern, text)
    
    # åˆ¤æ–­
    results = []
    for c, t in matches:
        if float(c) < float(t):
            results.append({'completed': c, 'total': t})
    
    return results
```

### è‡ªåŠ¨ç‚¹å‡»

```python
def click_incomplete_course(self, menu_id, course_index):
    """ç‚¹å‡»æœªå®Œæˆçš„è¯¾ç¨‹"""
    # è®¡ç®—ä½ç½®
    click_x = 200  # å­¦æ—¶æ–‡æœ¬ä½ç½®
    click_y = 330 + course_index * 45  # æ¯ä¸ªè¯¾ç¨‹45px
    
    # ç‚¹å‡»
    self.click_point(click_x, click_y)
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### æˆªå›¾åŒºåŸŸï¼ˆè‡ªåŠ¨è®¡ç®—ï¼‰

```python
# èœå•1çš„äºŒçº§åŒºåŸŸ
{'x': 50, 'y': 305, 'width': 500, 'height': 123}

# èœå•2çš„äºŒçº§åŒºåŸŸ  
{'x': 50, 'y': 494, 'width': 500, 'height': 123}

# èœå•3çš„äºŒçº§åŒºåŸŸ
{'x': 50, 'y': 685, 'width': 500, 'height': 123}

# èœå•4çš„äºŒçº§åŒºåŸŸ
{'x': 50, 'y': 875, 'width': 500, 'height': 95}
```

### ä¸€çº§èœå•åæ ‡

```python
[
    {'id': 1, 'x': 665, 'y': 271},  # èœå•1
    {'id': 2, 'x': 665, 'y': 461},  # èœå•2
    {'id': 3, 'x': 665, 'y': 651},  # èœå•3
    {'id': 4, 'x': 665, 'y': 841},  # èœå•4
]
```

---

## ğŸ¯ å®é™…ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¼šé¦–æ¬¡ä½¿ç”¨

```bash
# 1. æµ‹è¯•å•ä¸ªèœå•
python auto_learning_bot.py --menu 1 --test

# 2. æŸ¥çœ‹æˆªå›¾å’Œæ—¥å¿—
ls screenshot_*.png
cat learning_log_*.txt

# 3. ç¡®è®¤æ— è¯¯åè¿è¡Œæ‰€æœ‰
python auto_learning_bot.py --test
```

### åœºæ™¯2ï¼šåˆ†æ‰¹å¤„ç†

```bash
# ä»Šå¤©å¤„ç†å‰ä¸¤ä¸ªèœå•
python auto_learning_bot.py --menu 1 2

# æ˜å¤©å¤„ç†åä¸¤ä¸ªèœå•
python auto_learning_bot.py --menu 3 4
```

### åœºæ™¯3ï¼šæ— äººå€¼å®ˆ

```bash
# åå°è¿è¡Œï¼ˆLinuxï¼‰
nohup python auto_learning_bot.py > output.log 2>&1 &

# æŸ¥çœ‹è¿›åº¦
tail -f learning_log_*.txt
```

---

## âš ï¸ é‡è¦æç¤º

### 1. OCRå‡†ç¡®æ€§

- âœ… æ¸…æ™°çš„æ–‡æœ¬ï¼šè¯†åˆ«ç‡ > 95%
- âš ï¸ æ¨¡ç³Šçš„æ–‡æœ¬ï¼šè¯†åˆ«ç‡ 70-90%
- âŒ å›¾ç‰‡æ–‡å­—ï¼šè¯†åˆ«ç‡ < 50%

**å»ºè®®ï¼š** ç¡®ä¿è¯¾ç¨‹é¡µé¢æ–‡å­—æ¸…æ™°

### 2. çª—å£ä½ç½®

- ç¨‹åºä¼šè‡ªåŠ¨æŸ¥æ‰¾æˆ–æç¤ºæ‰‹åŠ¨å®šä½
- çª—å£ä½ç½®æ”¹å˜åéœ€è¦é‡æ–°è¿è¡Œ
- ä¸è¦ç§»åŠ¨çª—å£ä½ç½®

### 3. åæ ‡ç²¾åº¦

- æˆªå›¾åŒºåŸŸåæ ‡æ˜¯ä¼°ç®—å€¼
- å®é™…ä½¿ç”¨ä¸­å¯èƒ½éœ€è¦å¾®è°ƒ
- æŸ¥çœ‹æˆªå›¾éªŒè¯åŒºåŸŸæ˜¯å¦æ­£ç¡®

### 4. æµ‹è¯•æ¨¡å¼

```bash
# å»ºè®®å…ˆç”¨æµ‹è¯•æ¨¡å¼
python auto_learning_bot.py --test

# æµ‹è¯•æ¨¡å¼ä¸ä¼šç­‰å¾…è§†é¢‘æ’­æ”¾
# åªä¼šæˆªå›¾ã€è¯†åˆ«ã€ç‚¹å‡»
```

---

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šOCRè¯†åˆ«ä¸åˆ°

```bash
# æ£€æŸ¥OCRå®‰è£…
tesseract --version

# æ£€æŸ¥è¯­è¨€åŒ…
tesseract --list-langs
# åº”è¯¥çœ‹åˆ° chi_sim

# é‡æ–°å®‰è£…
sudo apt-get install --reinstall tesseract-ocr-chi-sim
```

### é—®é¢˜2ï¼šæˆªå›¾ä¸ºç©º

```python
# æ£€æŸ¥çª—å£åç§»
print(f"çª—å£ä½ç½®: ({offset_x}, {offset_y})")

# æ‰‹åŠ¨æµ‹è¯•æˆªå›¾
screenshot = ImageGrab.grab(bbox=(100, 200, 600, 400))
screenshot.save('test.png')
```

### é—®é¢˜3ï¼šåæ ‡ä¸å‡†

```python
# 1. å…ˆè¿è¡Œä¸€æ¬¡ï¼ŒæŸ¥çœ‹æˆªå›¾
python auto_learning_bot.py --menu 1 --test

# 2. æ‰“å¼€æˆªå›¾éªŒè¯åŒºåŸŸ
xdg-open screenshot_menu1_*.png

# 3. å¦‚æœåŒºåŸŸä¸å¯¹ï¼Œä¿®æ”¹ä»£ç ä¸­çš„åæ ‡
```

---

## âœ… éªŒè¯æ¸…å•

è¿è¡Œå‰æ£€æŸ¥ï¼š
- [ ] Python 3.7+ å·²å®‰è£…
- [ ] æ‰€æœ‰ä¾èµ–å·²å®‰è£…
- [ ] tesseract-ocr å·²å®‰è£…
- [ ] chi_sim è¯­è¨€åŒ…å·²å®‰è£…
- [ ] æµè§ˆå™¨å·²æ‰“å¼€è¯¾ç¨‹é¡µé¢
- [ ] è¯¾ç¨‹åˆ—è¡¨åœ¨å±å¹•ä¸Šå¯è§

è¿è¡Œåæ£€æŸ¥ï¼š
- [ ] æˆªå›¾å·²ç”Ÿæˆ
- [ ] æ—¥å¿—æ–‡ä»¶å·²ç”Ÿæˆ
- [ ] OCRè¯†åˆ«åˆ°å­¦æ—¶ä¿¡æ¯
- [ ] ç¨‹åºæ²¡æœ‰æŠ¥é”™

---

## ğŸ‰ æ€»ç»“

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
1. âœ… è‡ªåŠ¨æˆªå–äºŒçº§èœå•åŒºåŸŸ
2. âœ… OCRè¯†åˆ« "x.x/x.xå­¦æ—¶"
3. âœ… è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦æœªå®Œæˆ
4. âœ… è‡ªåŠ¨ç‚¹å‡»æœªå®Œæˆè¯¾ç¨‹
5. âœ… è®°å½•è¯¦ç»†æ—¥å¿—

**ä½¿ç”¨æµç¨‹ï¼š**
```bash
# ä¸€é”®å¯åŠ¨
python auto_learning_bot.py --test

# æŸ¥çœ‹ç»“æœ
ls screenshot_*.png
cat learning_log_*.txt
```

**æ¨èï¼š** å…ˆç”¨æµ‹è¯•æ¨¡å¼éªŒè¯ï¼Œç¡®è®¤æ— è¯¯åæ­£å¼è¿è¡Œï¼

---

*æœ€åæ›´æ–°: 2024-12-05*
*ç‰ˆæœ¬: v2.0 - è‡ªåŠ¨æˆªå±åˆ†æç‰ˆ*

